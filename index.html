<html></html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/mode/simple.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/php/php.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/ruby/ruby.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/go/go.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/rust/rust.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/sql/sql.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/selection/active-line.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/scroll/simplescrollbars.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/scroll/simplescrollbars.min.js"></script>
    <script>
        window.FontAwesomeConfig = {
            autoReplaceSvg: 'nest',
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>

    <style>
        * {
            font-family: "Inter", sans-serif;
        }

        ::-webkit-scrollbar {
            display: none;
        }

        .highlighted-section {
            outline: 2px solid #3F20FB;
            background-color: rgba(63, 32, 251, 0.1);
        }

        .edit-button {
            position: absolute;
            z-index: 1000;
        }

        :root {
            /* Base colors */
            --color-base: #ffffff;
            --color-base-50: #f9fafb;
            --color-base-100: #f3f4f6;
            --color-base-200: #e5e7eb;
            --color-base-300: #d1d5db;
            --color-base-400: #9ca3af;
            --color-base-500: #6b7280;
            --color-base-600: #4b5563;
            --color-base-700: #374151;
            --color-base-800: #1f2937;
            --color-base-900: #111827;
            --color-base-content: #1f2937;

            /* Primary colors */
            --color-primary: #3b82f6;
            --color-primary-50: #eff6ff;
            --color-primary-100: #dbeafe;
            --color-primary-200: #bfdbfe;
            --color-primary-300: #93c5fd;
            --color-primary-400: #60a5fa;
            --color-primary-500: #3b82f6;
            --color-primary-600: #2563eb;
            --color-primary-700: #1d4ed8;
            --color-primary-800: #1e40af;
            --color-primary-900: #1e3a8a;
            --color-primary-focus: #2563eb;
            --color-primary-content: #ffffff;

            /* Secondary colors */
            --color-secondary: #8b5cf6;
            --color-secondary-50: #f5f3ff;
            --color-secondary-100: #ede9fe;
            --color-secondary-200: #ddd6fe;
            --color-secondary-300: #c4b5fd;
            --color-secondary-400: #a78bfa;
            --color-secondary-500: #8b5cf6;
            --color-secondary-600: #7c3aed;
            --color-secondary-700: #6d28d9;
            --color-secondary-800: #5b21b6;
            --color-secondary-900: #4c1d95;
            --color-secondary-focus: #7c3aed;
            --color-secondary-content: #ffffff;

            /* Accent colors */
            --color-accent: #f472b6;
            --color-accent-50: #fdf2f8;
            --color-accent-100: #fce7f3;
            --color-accent-200: #fbcfe8;
            --color-accent-300: #f9a8d4;
            --color-accent-400: #f472b6;
            --color-accent-500: #ec4899;
            --color-accent-600: #db2777;
            --color-accent-700: #be185d;
            --color-accent-800: #9d174d;
            --color-accent-900: #831843;
            --color-accent-focus: #db2777;
            --color-accent-content: #ffffff;

            /* Neutral colors */
            --color-neutral: #6b7280;
            --color-neutral-50: #f9fafb;
            --color-neutral-100: #f3f4f6;
            --color-neutral-200: #e5e7eb;
            --color-neutral-300: #d1d5db;
            --color-neutral-400: #9ca3af;
            --color-neutral-500: #6b7280;
            --color-neutral-600: #4b5563;
            --color-neutral-700: #374151;
            --color-neutral-800: #1f2937;
            --color-neutral-900: #111827;
            --color-neutral-focus: #4b5563;
            --color-neutral-content: #ffffff;

            /* Info colors */
            --color-info: #3b82f6;
            --color-info-50: #eff6ff;
            --color-info-100: #dbeafe;
            --color-info-200: #bfdbfe;
            --color-info-300: #93c5fd;
            --color-info-400: #60a5fa;
            --color-info-500: #3b82f6;
            --color-info-600: #2563eb;
            --color-info-700: #1d4ed8;
            --color-info-800: #1e40af;
            --color-info-900: #1e3a8a;
            --color-info-focus: #2563eb;
            --color-info-content: #ffffff;

            /* Success colors */
            --color-success: #10b981;
            --color-success-50: #ecfdf5;
            --color-success-100: #d1fae5;
            --color-success-200: #a7f3d0;
            --color-success-300: #6ee7b7;
            --color-success-400: #34d399;
            --color-success-500: #10b981;
            --color-success-600: #059669;
            --color-success-700: #047857;
            --color-success-800: #065f46;
            --color-success-900: #064e3b;
            --color-success-focus: #059669;
            --color-success-content: #ffffff;

            /* Warning colors */
            --color-warning: #f59e0b;
            --color-warning-50: #fffbeb;
            --color-warning-100: #fef3c7;
            --color-warning-200: #fde68a;
            --color-warning-300: #fcd34d;
            --color-warning-400: #fbbf24;
            --color-warning-500: #f59e0b;
            --color-warning-600: #d97706;
            --color-warning-700: #b45309;
            --color-warning-800: #92400e;
            --color-warning-900: #78350f;
            --color-warning-focus: #d97706;
            --color-warning-content: #ffffff;

            /* Error colors */
            --color-error: #ef4444;
            --color-error-50: #fef2f2;
            --color-error-100: #fee2e2;
            --color-error-200: #fecaca;
            --color-error-300: #fca5a5;
            --color-error-400: #f87171;
            --color-error-500: #ef4444;
            --color-error-600: #dc2626;
            --color-error-700: #b91c1c;
            --color-error-800: #991b1b;
            --color-error-900: #7f1d1d;
            --color-error-focus: #dc2626;
            --color-error-content: #ffffff;
        }

        /* Dark theme */
        .dark {
            /* Base colors */
            --color-base: #1f2937;
            --color-base-50: #111827;
            --color-base-100: #1f2937;
            --color-base-200: #374151;
            --color-base-300: #4b5563;
            --color-base-400: #6b7280;
            --color-base-500: #9ca3af;
            --color-base-600: #d1d5db;
            --color-base-700: #e5e7eb;
            --color-base-800: #f3f4f6;
            --color-base-900: #f9fafb;
            --color-base-content: #f9fafb;

            /* Primary colors */
            --color-primary: #60a5fa;
            --color-primary-50: #1e3a8a;
            --color-primary-100: #1e40af;
            --color-primary-200: #1d4ed8;
            --color-primary-300: #2563eb;
            --color-primary-400: #3b82f6;
            --color-primary-500: #60a5fa;
            --color-primary-600: #93c5fd;
            --color-primary-700: #bfdbfe;
            --color-primary-800: #dbeafe;
            --color-primary-900: #eff6ff;
            --color-primary-focus: #3b82f6;
            --color-primary-content: #1f2937;

            /* Secondary colors */
            --color-secondary: #a78bfa;
            --color-secondary-50: #4c1d95;
            --color-secondary-100: #5b21b6;
            --color-secondary-200: #6d28d9;
            --color-secondary-300: #7c3aed;
            --color-secondary-400: #8b5cf6;
            --color-secondary-500: #a78bfa;
            --color-secondary-600: #c4b5fd;
            --color-secondary-700: #ddd6fe;
            --color-secondary-800: #ede9fe;
            --color-secondary-900: #f5f3ff;
            --color-secondary-focus: #8b5cf6;
            --color-secondary-content: #1f2937;

            /* Accent colors */
            --color-accent: #f472b6;
            --color-accent-50: #831843;
            --color-accent-100: #9d174d;
            --color-accent-200: #be185d;
            --color-accent-300: #db2777;
            --color-accent-400: #ec4899;
            --color-accent-500: #f472b6;
            --color-accent-600: #f9a8d4;
            --color-accent-700: #fbcfe8;
            --color-accent-800: #fce7f3;
            --color-accent-900: #fdf2f8;
            --color-accent-focus: #ec4899;
            --color-accent-content: #1f2937;

            /* Neutral colors remain the same as light theme */

            /* Info colors */
            --color-info: #60a5fa;
            --color-info-50: #1e3a8a;
            --color-info-100: #1e40af;
            --color-info-200: #1d4ed8;
            --color-info-300: #2563eb;
            --color-info-400: #3b82f6;
            --color-info-500: #60a5fa;
            --color-info-600: #93c5fd;
            --color-info-700: #bfdbfe;
            --color-info-800: #dbeafe;
            --color-info-900: #eff6ff;
            --color-info-focus: #3b82f6;
            --color-info-content: #1f2937;

            /* Success colors */
            --color-success: #34d399;
            --color-success-50: #064e3b;
            --color-success-100: #065f46;
            --color-success-200: #047857;
            --color-success-300: #059669;
            --color-success-400: #10b981;
            --color-success-500: #34d399;
            --color-success-600: #6ee7b7;
            --color-success-700: #a7f3d0;
            --color-success-800: #d1fae5;
            --color-success-900: #ecfdf5;
            --color-success-focus: #10b981;
            --color-success-content: #1f2937;

            /* Warning colors */
            --color-warning: #fbbf24;
            --color-warning-50: #78350f;
            --color-warning-100: #92400e;
            --color-warning-200: #b45309;
            --color-warning-300: #d97706;
            --color-warning-400: #f59e0b;
            --color-warning-500: #fbbf24;
            --color-warning-600: #fcd34d;
            --color-warning-700: #fde68a;
            --color-warning-800: #fef3c7;
            --color-warning-900: #fffbeb;
            --color-warning-focus: #f59e0b;
            --color-warning-content: #1f2937;

            /* Error colors */
            --color-error: #f87171;
            --color-error-50: #7f1d1d;
            --color-error-100: #991b1b;
            --color-error-200: #b91c1c;
            --color-error-300: #dc2626;
            --color-error-400: #ef4444;
            --color-error-500: #f87171;
            --color-error-600: #fca5a5;
            --color-error-700: #fecaca;
            --color-error-800: #fee2e2;
            --color-error-900: #fef2f2;
            --color-error-focus: #ef4444;
            --color-error-content: #1f2937;
        }

        .CodeMirror {
            height: 350px !important;
            font-family: 'Fira Code', monospace !important;
            font-size: 14px !important;
            background-color: #1e1e1e !important;
            color: #d4d4d4 !important;
        }

        .CodeMirror-gutters {
            background-color: #1e1e1e !important;
            border-right: 1px solid #404040 !important;
        }

        .CodeMirror-linenumber {
            color: #858585 !important;
        }

        .CodeMirror-cursor {
            border-left: 2px solid #a0a0a0 !important;
        }

        .CodeMirror-selected {
            background-color: #264f78 !important;
        }

        .CodeMirror-focused {
            outline: none !important;
        }

        /* Dark scrollbar for CodeMirror */
        .CodeMirror-vscrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .CodeMirror-vscrollbar::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .CodeMirror-vscrollbar::-webkit-scrollbar-thumb {
            background: #404040;
            border-radius: 4px;
        }

        .CodeMirror-vscrollbar::-webkit-scrollbar-thumb:hover {
            background: #4a4a4a;
        }

        /* Input focus styles */
        .focus-ring {
            transition: all 0.2s ease;
        }

        .focus-ring:focus {
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }

        /* Placeholder styles */
        ::placeholder {
            color: #9ca3af !important;
            opacity: 1 !important;
        }

        :-ms-input-placeholder {
            color: #9ca3af !important;
        }

        ::-ms-input-placeholder {
            color: #9ca3af !important;
        }

        /* Input text colors */
        input, select, textarea {
            color: black !important;
            background-color: white !important;
        }

        input::placeholder, textarea::placeholder {
            color: #6B7280 !important;
            opacity: 1 !important;
        }

        /* Preserve CodeMirror styles */
        .CodeMirror, .CodeMirror * {
            color: inherit;
            background-color: inherit;
        }

        .CodeMirror textarea {
            color: inherit !important;
            background-color: transparent !important;
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Default Tailwind colors
                        transparent: 'transparent',
                        current: 'currentColor',
                        black: '#000000',
                        white: '#ffffff',
                        gray: {
                            50: '#f9fafb',
                            100: '#f3f4f6',
                            200: '#e5e7eb',
                            300: '#d1d5db',
                            400: '#9ca3af',
                            500: '#6b7280',
                            600: '#4b5563',
                            700: '#374151',
                            800: '#1f2937',
                            900: '#111827',
                        },
                        red: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                            800: '#991b1b',
                            900: '#7f1d1d',
                        },
                        yellow: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            200: '#fde68a',
                            300: '#fcd34d',
                            400: '#fbbf24',
                            500: '#f59e0b',
                            600: '#d97706',
                            700: '#b45309',
                            800: '#92400e',
                            900: '#78350f',
                        },
                        green: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        },
                        blue: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        indigo: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        },
                        purple: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        },
                        pink: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            200: '#fbcfe8',
                            300: '#f9a8d4',
                            400: '#f472b6',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                            800: '#9d174d',
                            900: '#831843',
                        },

                        // Custom color schemes
                        base: {
                            DEFAULT: 'var(--color-base)',
                            50: 'var(--color-base-50)',
                            100: 'var(--color-base-100)',
                            200: 'var(--color-base-200)',
                            300: 'var(--color-base-300)',
                            400: 'var(--color-base-400)',
                            500: 'var(--color-base-500)',
                            600: 'var(--color-base-600)',
                            700: 'var(--color-base-700)',
                            800: 'var(--color-base-800)',
                            900: 'var(--color-base-900)',
                            content: 'var(--color-base-content)',
                        },
                        primary: {
                            DEFAULT: 'var(--color-primary)',
                            50: 'var(--color-primary-50)',
                            100: 'var(--color-primary-100)',
                            200: 'var(--color-primary-200)',
                            300: 'var(--color-primary-300)',
                            400: 'var(--color-primary-400)',
                            500: 'var(--color-primary-500)',
                            600: 'var(--color-primary-600)',
                            700: 'var(--color-primary-700)',
                            800: 'var(--color-primary-800)',
                            900: 'var(--color-primary-900)',
                            focus: 'var(--color-primary-focus)',
                            content: 'var(--color-primary-content)',
                        },
                        secondary: {
                            DEFAULT: 'var(--color-secondary)',
                            50: 'var(--color-secondary-50)',
                            100: 'var(--color-secondary-100)',
                            200: 'var(--color-secondary-200)',
                            300: 'var(--color-secondary-300)',
                            400: 'var(--color-secondary-400)',
                            500: 'var(--color-secondary-500)',
                            600: 'var(--color-secondary-600)',
                            700: 'var(--color-secondary-700)',
                            800: 'var(--color-secondary-800)',
                            900: 'var(--color-secondary-900)',
                            focus: 'var(--color-secondary-focus)',
                            content: 'var(--color-secondary-content)',
                        },
                        accent: {
                            DEFAULT: 'var(--color-accent)',
                            50: 'var(--color-accent-50)',
                            100: 'var(--color-accent-100)',
                            200: 'var(--color-accent-200)',
                            300: 'var(--color-accent-300)',
                            400: 'var(--color-accent-400)',
                            500: 'var(--color-accent-500)',
                            600: 'var(--color-accent-600)',
                            700: 'var(--color-accent-700)',
                            800: 'var(--color-accent-800)',
                            900: 'var(--color-accent-900)',
                            focus: 'var(--color-accent-focus)',
                            content: 'var(--color-accent-content)',
                        },
                        neutral: {
                            DEFAULT: 'var(--color-neutral)',
                            50: 'var(--color-neutral-50)',
                            100: 'var(--color-neutral-100)',
                            200: 'var(--color-neutral-200)',
                            300: 'var(--color-neutral-300)',
                            400: 'var(--color-neutral-400)',
                            500: 'var(--color-neutral-500)',
                            600: 'var(--color-neutral-600)',
                            700: 'var(--color-neutral-700)',
                            800: 'var(--color-neutral-800)',
                            900: 'var(--color-neutral-900)',
                            focus: 'var(--color-neutral-focus)',
                            content: 'var(--color-neutral-content)',
                        },
                        info: {
                            DEFAULT: 'var(--color-info)',
                            50: 'var(--color-info-50)',
                            100: 'var(--color-info-100)',
                            200: 'var(--color-info-200)',
                            300: 'var(--color-info-300)',
                            400: 'var(--color-info-400)',
                            500: 'var(--color-info-500)',
                            600: 'var(--color-info-600)',
                            700: 'var(--color-info-700)',
                            800: 'var(--color-info-800)',
                            900: 'var(--color-info-900)',
                            focus: 'var(--color-info-focus)',
                            content: 'var(--color-info-content)',
                        },
                        success: {
                            DEFAULT: 'var(--color-success)',
                            50: 'var(--color-success-50)',
                            100: 'var(--color-success-100)',
                            200: 'var(--color-success-200)',
                            300: 'var(--color-success-300)',
                            400: 'var(--color-success-400)',
                            500: 'var(--color-success-500)',
                            600: 'var(--color-success-600)',
                            700: 'var(--color-success-700)',
                            800: 'var(--color-success-800)',
                            900: 'var(--color-success-900)',
                            focus: 'var(--color-success-focus)',
                            content: 'var(--color-success-content)',
                        },
                        warning: {
                            DEFAULT: 'var(--color-warning)',
                            50: 'var(--color-warning-50)',
                            100: 'var(--color-warning-100)',
                            200: 'var(--color-warning-200)',
                            300: 'var(--color-warning-300)',
                            400: 'var(--color-warning-400)',
                            500: 'var(--color-warning-500)',
                            600: 'var(--color-warning-600)',
                            700: 'var(--color-warning-700)',
                            800: 'var(--color-warning-800)',
                            900: 'var(--color-warning-900)',
                            focus: 'var(--color-warning-focus)',
                            content: 'var(--color-warning-content)',
                        },
                        error: {
                            DEFAULT: 'var(--color-error)',
                            50: 'var(--color-error-50)',
                            100: 'var(--color-error-100)',
                            200: 'var(--color-error-200)',
                            300: 'var(--color-error-300)',
                            400: 'var(--color-error-400)',
                            500: 'var(--color-error-500)',
                            600: 'var(--color-error-600)',
                            700: 'var(--color-error-700)',
                            800: 'var(--color-error-800)',
                            900: 'var(--color-error-900)',
                            focus: 'var(--color-error-focus)',
                            content: 'var(--color-error-content)',
                        },
                        // Aliases
                        danger: {
                            DEFAULT: 'var(--color-error)',
                            50: 'var(--color-error-50)',
                            100: 'var(--color-error-100)',
                            200: 'var(--color-error-200)',
                            300: 'var(--color-error-300)',
                            400: 'var(--color-error-400)',
                            500: 'var(--color-error-500)',
                            600: 'var(--color-error-600)',
                            700: 'var(--color-error-700)',
                            800: 'var(--color-error-800)',
                            900: 'var(--color-error-900)',
                            focus: 'var(--color-error-focus)',
                            content: 'var(--color-error-content)',
                        },
                        failure: {
                            DEFAULT: 'var(--color-error)',
                            50: 'var(--color-error-50)',
                            100: 'var(--color-error-100)',
                            200: 'var(--color-error-200)',
                            300: 'var(--color-error-300)',
                            400: 'var(--color-error-400)',
                            500: 'var(--color-error-500)',
                            600: 'var(--color-error-600)',
                            700: 'var(--color-error-700)',
                            800: 'var(--color-error-800)',
                            900: 'var(--color-error-900)',
                            focus: 'var(--color-error-focus)',
                            content: 'var(--color-error-content)',
                        },
                    },
                },
            },
            variants: {
                extend: {
                    backgroundColor: ['active', 'group-hover'],
                    textColor: ['active', 'group-hover'],
                },
            },
            plugins: [],
        };
    </script>
</head>

<body class="h-full text-base-content">
    <div id="root" class="bg-gray-50">
        <header id="header" class="bg-white border-b border-gray-200 fixed w-full top-0 z-50">
            <div class="container mx-auto px-4 py-4">
                <div class="flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0">
                    <div class="flex items-center space-x-4">
                        <i class="fa-solid fa-code text-blue-600 text-2xl"></i>
                        <h1 class="text-xl font-semibold">AI Code Reviewer</h1>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4 w-full sm:w-auto">
                        <select id="programming-language"
                            class="w-full sm:w-auto bg-white border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-black">
                            <option>JavaScript</option>
                            <option>TypeScript</option>
                            <option>React/JSX</option>
                            <option>PHP</option>
                            <option>Python</option>
                            <option>Java</option>
                            <option>C++</option>
                            <option>C#</option>
                            <option>Ruby</option>
                            <option>Go</option>
                            <option>Rust</option>
                            <option>HTML</option>
                            <option>CSS</option>
                            <option>SQL</option>
                        </select>
                        <select id="response-language"
                            class="w-full sm:w-auto bg-white border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-black">
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="tr">Turkish</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>
        <main id="main" class="container mx-auto px-4 pt-40 sm:pt-24 pb-16">
            <section id="editor-section" class="mb-6">
                <div class="bg-[#1e1e1e] rounded-lg p-2 sm:p-4 h-[400px] mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex space-x-2">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="text-gray-400 hover:text-white transition-colors" onclick="copyCode()">
                                <i class="fa-solid fa-copy"></i>
                            </button>
                            <button class="text-gray-400 hover:text-white transition-colors" onclick="toggleFullscreen()">
                                <i class="fa-solid fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <textarea id="code-editor" class="w-full h-[350px] bg-[#1e1e1e] text-white"></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Analysis Prompt</label>
                    <textarea
                        class="w-full h-24 px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-sm sm:text-base text-black placeholder-gray-500"
                        placeholder="E.g., Optimize for performance, Find security vulnerabilities..."></textarea>
                </div>
                <div class="mb-4">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2 space-y-2 sm:space-y-0">
                        <label class="block text-sm font-medium text-gray-700">RapidAPI Key</label>
                        <a href="https://rapidapi.com/bilgisamapi-api2/api/generative-ai-api-openai-gpt-4o-api-ai-integration" 
                           target="_blank"
                           class="text-blue-600 hover:text-blue-700 text-sm flex items-center space-x-1 transition-colors">
                            <span>Get Key</span>
                            <i class="fa-solid fa-external-link-alt text-xs"></i>
                        </a>
                    </div>
                    <div class="flex space-x-2">
                        <input type="password" id="api-key" 
                            class="flex-1 px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-sm sm:text-base text-black placeholder-gray-500"
                            placeholder="Enter your RapidAPI key">
                        <button onclick="toggleApiVisibility()" class="px-3 py-2 text-gray-500 hover:text-gray-700 transition-colors">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button
                    class="w-full bg-blue-600 text-white py-2 sm:py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 text-sm sm:text-base focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    <i class="fa-solid fa-wand-magic-sparkles"></i>
                    <span>Run Analysis</span>
                </button>
            </section>
            <section id="results-section" class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 hidden">
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold">Code Issues</h2>
                        <span class="bg-red-100 text-red-600 px-2 py-1 rounded-full text-sm">0 Issues</span>
                    </div>
                    <div class="space-y-4">
                    </div>
                </div>
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm">
                    <h2 class="text-lg font-semibold mb-4">AI Suggestions</h2>
                    <div class="space-y-4">
                    </div>
                </div>
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm">
                    <h2 class="text-lg font-semibold mb-4">Overall Score</h2>
                    <div class="flex items-center justify-center">
                        <div class="relative w-32 h-32">
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-3xl font-bold text-blue-600">0%</span>
                            </div>
                            <svg class="w-full h-full" viewBox="0 0 36 36">
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none" stroke="#E5E7EB" stroke-width="3" />
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                    fill="none" stroke="#2563EB" stroke-width="3" stroke-dasharray="0, 100" />
                            </svg>
                        </div>
                    </div>
                </div>
            </section>

            <div id="loading-section" class="hidden">
                <div class="flex flex-col items-center justify-center py-8 sm:py-12">
                    <div class="animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-b-2 border-blue-600 mb-4"></div>
                    <p class="text-base sm:text-lg text-gray-600">Analyzing your code...</p>
                </div>
            </div>
        </main>
        <footer id="footer" class="bg-white border-t border-gray-200 py-4 sm:py-6">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
                    <div class="flex flex-wrap items-center justify-center md:justify-start space-x-4 sm:space-x-6">
                        <span class="text-gray-600 hover:text-gray-900 cursor-pointer text-sm sm:text-base">Documentation</span>
                        <span class="text-gray-600 hover:text-gray-900 cursor-pointer text-sm sm:text-base">Support</span>
                        <span class="text-gray-600 hover:text-gray-900 cursor-pointer text-sm sm:text-base">Feedback</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="https://github.com/smtkuo/ai-code-reviewer" target="_blank" class="text-gray-600 hover:text-gray-900">
                            <i class="fa-brands fa-github text-lg sm:text-xl"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/samet-utku-olgun/" target="_blank" class="text-gray-600 hover:text-gray-900">
                            <i class="fa-brands fa-linkedin text-lg sm:text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">Settings</h2>
                <button class="text-gray-500 hover:text-gray-700" onclick="toggleSettings()">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">RapidAPI Key</label>
                    <input type="password" id="api-key" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
                        placeholder="Enter your RapidAPI key">
                </div>
                <button onclick="saveSettings()"
                    class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    Save Settings
                </button>
            </div>
        </div>
    </div>
</body>

<script>
    let editor;
    let currentLanguage = 'javascript';
    let apiKey = 'c71d3857b3msh5369877d05c9fb3p199b4fjsn8aa4c82ecbff';
    let appState = {
        code: '',
        programmingLanguage: 'JavaScript',
        responseLanguage: 'en',
        prompt: '',
        apiKey: '',
        response: null
    };

    // State management functions
    function updateState(newState) {
        appState = { ...appState, ...newState };
        saveStateToUrl();
    }

    function saveStateToUrl() {
        const stateString = JSON.stringify(appState);
        const base64State = btoa(encodeURIComponent(stateString));
        window.location.hash = base64State;
    }

    function loadStateFromUrl() {
        try {
            const hash = window.location.hash.slice(1);
            if (hash) {
                const stateString = decodeURIComponent(atob(hash));
                appState = JSON.parse(stateString);
                applyStateToUI();
            }
        } catch (error) {
            console.error('Error loading state from URL:', error);
        }
    }

    function applyStateToUI() {
        // Set code editor content
        if (appState.code) {
            editor.setValue(appState.code);
        }

        // Set programming language
        const progLangSelect = document.getElementById('programming-language');
        if (appState.programmingLanguage) {
            progLangSelect.value = appState.programmingLanguage;
            updateEditorMode(appState.programmingLanguage);
        }

        // Set response language
        const respLangSelect = document.getElementById('response-language');
        if (appState.responseLanguage) {
            respLangSelect.value = appState.responseLanguage;
        }

        // Set prompt
        const promptTextarea = document.querySelector('textarea[placeholder*="Optimize"]');
        if (appState.prompt) {
            promptTextarea.value = appState.prompt;
        }

        // Set API key
        if (appState.apiKey) {
            document.getElementById('api-key').value = appState.apiKey;
            apiKey = appState.apiKey;
        }

        // Show results if they exist
        if (appState.response) {
            document.getElementById('results-section').classList.remove('hidden');
            updateResults(appState.response);
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Initialize CodeMirror with additional options
        editor = CodeMirror.fromTextArea(document.getElementById('code-editor'), {
            mode: 'javascript',
            theme: 'monokai',
            lineNumbers: true,
            autoCloseBrackets: true,
            matchBrackets: true,
            indentUnit: 4,
            tabSize: 4,
            lineWrapping: true,
            viewportMargin: Infinity,
            jsx: true,
            // Add additional options for better editor experience
            autofocus: true,
            scrollbarStyle: 'overlay',
            styleActiveLine: true,
            matchBrackets: true,
            autoCloseBrackets: true,
            indentWithTabs: false
        });

        // Add change event listener to editor
        editor.on('change', function() {
            updateState({ code: editor.getValue() });
        });

        // Language selection handler
        const progLangSelect = document.getElementById('programming-language');
        progLangSelect.addEventListener('change', function(e) {
            currentLanguage = e.target.value;
            updateEditorMode(currentLanguage);
            updateState({ programmingLanguage: e.target.value });
        });

        // Response language handler
        const respLangSelect = document.getElementById('response-language');
        respLangSelect.addEventListener('change', function(e) {
            updateState({ responseLanguage: e.target.value });
        });

        // Prompt textarea handler
        const promptTextarea = document.querySelector('textarea[placeholder*="Optimize"]');
        promptTextarea.addEventListener('input', function(e) {
            updateState({ prompt: e.target.value });
        });

        // API key input handler
        document.getElementById('api-key').addEventListener('input', function(e) {
            apiKey = e.target.value;
            localStorage.setItem('rapidApiKey', apiKey);
            updateState({ apiKey: e.target.value });
        });

        // Run analysis button handler
        const analyzeButton = document.querySelector('button.bg-blue-600');
        analyzeButton.addEventListener('click', runAnalysis);

        // Load state from URL if exists
        loadStateFromUrl();

        // Load saved API key if exists
        const savedApiKey = localStorage.getItem('rapidApiKey');
        if (savedApiKey) {
            apiKey = savedApiKey;
            document.getElementById('api-key').value = savedApiKey;
            updateState({ apiKey: savedApiKey });
        }
    });

    function updateEditorMode(language) {
        let mode;
        // Reset JSX option first
        editor.setOption('jsx', false);
        
        switch(language.toLowerCase()) {
            case 'javascript':
                mode = 'javascript';
                break;
            case 'typescript':
                mode = {name: 'javascript', typescript: true};
                break;
            case 'react/jsx':
                mode = 'javascript';
                editor.setOption('jsx', true);
                break;
            case 'php':
                mode = {name: 'php', startOpen: true};
                break;
            case 'python':
                mode = 'python';
                break;
            case 'java':
            case 'c++':
            case 'c#':
                mode = 'clike';
                break;
            case 'ruby':
                mode = 'ruby';
                break;
            case 'go':
                mode = 'go';
                break;
            case 'rust':
                mode = 'rust';
                break;
            case 'html':
                mode = 'xml';
                break;
            case 'css':
                mode = 'css';
                break;
            case 'sql':
                mode = 'sql';
                break;
            default:
                mode = 'javascript';
        }
        editor.setOption('mode', mode);
    }

    function copyCode() {
        const code = editor.getValue();
        navigator.clipboard.writeText(code);
    }

    function toggleFullscreen() {
        const editorElement = editor.getWrapperElement();
        if (!document.fullscreenElement) {
            editorElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    function runAnalysis() {
        const code = editor.getValue();
        const prompt = document.querySelector('textarea[placeholder*="Optimize"]').value;
        const responseLang = document.getElementById('response-language').value;

        document.getElementById('results-section').classList.add('hidden');
        document.getElementById('loading-section').classList.remove('hidden');

        const data = JSON.stringify({
            prompt: `Analyze the following code and provide detailed feedback:
CODE:
${code}

ANALYSIS REQUIREMENTS:
${prompt || 'Provide a comprehensive code analysis including performance, security, and best practices.'}`,
            lang: responseLang,
            responseType: {
                format: 'json',
                structure: {
                    analysis: {
                        summary: 'string',
                        codeQuality: {
                            score: 'number',
                            metrics: [{
                                name: 'string',
                                score: 'number',
                                details: 'string'
                            }]
                        },
                        issues: [{
                            type: 'string',
                            severity: 'string',
                            description: 'string',
                            location: 'string'
                        }],
                        suggestions: [{
                            title: 'string',
                            description: 'string',
                            codeExample: 'string',
                            impact: 'string'
                        }],
                        bestPractices: [{
                            category: 'string',
                            recommendations: ['string']
                        }]
                    },
                    performance: {
                        score: 'number',
                        issues: ['string'],
                        optimizations: ['string']
                    },
                    security: {
                        score: 'number',
                        vulnerabilities: ['string'],
                        recommendations: ['string']
                    }
                }
            }
        });

        const xhr = new XMLHttpRequest();
        xhr.withCredentials = true;

        xhr.addEventListener('readystatechange', function() {
            if (this.readyState === this.DONE) {
                try {
                    const response = JSON.parse(this.responseText);
                    document.getElementById('loading-section').classList.add('hidden');
                    document.getElementById('results-section').classList.remove('hidden');
                    updateResults(response.result.response);
                    // Save response to state
                    updateState({ response: response.result.response });
                } catch (error) {
                    console.error('Error parsing response:', error);
                    document.getElementById('loading-section').classList.add('hidden');
                    alert('Error analyzing code. Please check your API key and try again.');
                }
            }
        });

        xhr.open('POST', 'https://generative-ai-api-openai-gpt-4o-api-ai-integration.p.rapidapi.com/generate?noqueue=1');
        xhr.setRequestHeader('x-rapidapi-key', apiKey);
        xhr.setRequestHeader('x-rapidapi-host', 'generative-ai-api-openai-gpt-4o-api-ai-integration.p.rapidapi.com');
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.send(data);
    }

    function updateResults(response) {
        try {
            // Update Code Issues section
            const issues = response.analysis.issues || [];
            const issuesCount = issues.length;
            const issuesContainer = document.querySelector('#results-section > div:nth-child(1)');
            issuesContainer.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold">Code Issues</h2>
                    <span class="bg-red-100 text-red-600 px-2 py-1 rounded-full text-sm">${issuesCount} Issues</span>
                </div>
                <div class="space-y-4">
                    <div class="mb-4">
                        <h3 class="text-md font-medium mb-2">Summary</h3>
                        <p class="text-sm text-gray-600">${response.analysis.summary}</p>
                    </div>
                    ${issues.map(issue => `
                        <div class="border-l-4 border-${getSeverityColor(issue.severity)}-500 pl-4">
                            <div class="flex justify-between items-start">
                                <h3 class="font-medium text-gray-900">${issue.type}</h3>
                                <span class="text-xs px-2 py-1 rounded-full ${getSeverityBadgeColor(issue.severity)}">${issue.severity}</span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">${issue.description}</p>
                            ${issue.location ? `<p class="text-xs text-gray-500 mt-1">Location: ${issue.location}</p>` : ''}
                        </div>
                    `).join('')}
                    <div class="mt-4">
                        <h3 class="text-md font-medium mb-2">Best Practices</h3>
                        ${response.analysis.bestPractices.map(practice => `
                            <div class="mb-3">
                                <h4 class="text-sm font-medium text-gray-900">${practice.category}</h4>
                                <ul class="list-disc list-inside text-sm text-gray-600 mt-1">
                                    ${practice.recommendations.map(rec => `
                                        <li>${rec}</li>
                                    `).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>`;

            // Update AI Suggestions section
            const suggestions = response.analysis.suggestions || [];
            const suggestionsContainer = document.querySelector('#results-section > div:nth-child(2)');
            suggestionsContainer.innerHTML = `
                <h2 class="text-lg font-semibold mb-4">AI Suggestions</h2>
                <div class="space-y-4">
                    <div class="mb-4">
                        <h3 class="text-md font-medium mb-2">Code Quality Metrics</h3>
                        ${response.analysis.codeQuality.metrics.map(metric => `
                            <div class="mb-3">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm font-medium">${metric.name}</span>
                                    <span class="text-sm font-medium text-blue-600">${metric.score}%</span>
                                </div>
                                <p class="text-sm text-gray-600">${metric.details}</p>
                            </div>
                        `).join('')}
                    </div>
                    ${suggestions.map(suggestion => `
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-900">${suggestion.title}</span>
                                ${suggestion.codeExample ? `
                                    <button class="text-blue-600 hover:text-blue-700 transition-colors" onclick="copyToClipboard('${escapeHtml(suggestion.codeExample)}')">
                                        <i class="fa-solid fa-copy"></i>
                                    </button>
                                ` : ''}
                            </div>
                            <p class="text-sm text-gray-600 mb-2">${suggestion.description}</p>
                            ${suggestion.codeExample ? `
                                <pre class="text-sm text-gray-700 bg-gray-100 p-2 rounded overflow-x-auto">${escapeHtml(suggestion.codeExample)}</pre>
                            ` : ''}
                            ${suggestion.impact ? `
                                <p class="text-xs text-gray-500 mt-2">Impact: ${suggestion.impact}</p>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>`;

            // Update Overall Score section
            const scores = {
                codeQuality: response.analysis.codeQuality?.score || 0,
                performance: response.performance?.score || 0,
                security: response.security?.score || 0
            };
            const overallScore = Math.round(Object.values(scores).reduce((a, b) => a + b, 0) / Object.keys(scores).length);
            
            const scoreContainer = document.querySelector('#results-section > div:nth-child(3)');
            scoreContainer.innerHTML = `
                <h2 class="text-lg font-semibold mb-4">Overall Score</h2>
                <div class="flex items-center justify-center">
                    <div class="relative w-32 h-32">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span class="text-3xl font-bold text-blue-600">${overallScore}%</span>
                        </div>
                        <svg class="w-full h-full" viewBox="0 0 36 36">
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#E5E7EB" stroke-width="3" />
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#2563EB" stroke-width="3" stroke-dasharray="${overallScore}, 100" />
                        </svg>
                    </div>
                </div>
                <div class="mt-6 space-y-4">
                    <div class="space-y-2">
                        <h3 class="text-md font-medium">Score Breakdown</h3>
                        <div class="grid grid-cols-3 gap-2 text-sm">
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <div class="font-medium">Code Quality</div>
                                <div class="text-blue-600">${scores.codeQuality}%</div>
                            </div>
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <div class="font-medium">Performance</div>
                                <div class="text-blue-600">${scores.performance}%</div>
                            </div>
                            <div class="text-center p-2 bg-gray-50 rounded">
                                <div class="font-medium">Security</div>
                                <div class="text-blue-600">${scores.security}%</div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <h3 class="text-md font-medium">Performance</h3>
                        <div class="text-sm text-gray-600">
                            <div class="mb-2">
                                <h4 class="font-medium">Issues:</h4>
                                <ul class="list-disc list-inside">
                                    ${response.performance.issues.map(issue => `<li>${issue}</li>`).join('')}
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium">Optimizations:</h4>
                                <ul class="list-disc list-inside">
                                    ${response.performance.optimizations.map(opt => `<li>${opt}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <h3 class="text-md font-medium">Security</h3>
                        <div class="text-sm text-gray-600">
                            <div class="mb-2">
                                <h4 class="font-medium">Vulnerabilities:</h4>
                                <ul class="list-disc list-inside">
                                    ${response.security.vulnerabilities.map(vuln => `<li>${vuln}</li>`).join('')}
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium">Recommendations:</h4>
                                <ul class="list-disc list-inside">
                                    ${response.security.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>`;

        } catch (error) {
            console.error('Error updating results:', error);
            alert('Error displaying analysis results. Please try again.');
        }
    }

    function getSeverityColor(severity) {
        switch(severity?.toLowerCase()) {
            case 'critical':
                return 'red';
            case 'high':
                return 'orange';
            case 'medium':
                return 'yellow';
            case 'low':
                return 'blue';
            default:
                return 'gray';
        }
    }

    function getSeverityBadgeColor(severity) {
        switch(severity?.toLowerCase()) {
            case 'critical':
                return 'bg-red-100 text-red-800';
            case 'high':
                return 'bg-orange-100 text-orange-800';
            case 'medium':
                return 'bg-yellow-100 text-yellow-800';
            case 'low':
                return 'bg-blue-100 text-blue-800';
            default:
                return 'bg-gray-100 text-gray-800';
        }
    }

    function escapeHtml(unsafe) {
        if (!unsafe) return '';
        return unsafe
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text);
    }

    function toggleSettings() {
        const modal = document.getElementById('settings-modal');
        modal.classList.toggle('hidden');
        modal.classList.toggle('flex');
    }

    function saveSettings() {
        const newApiKey = document.getElementById('api-key').value;
        if (newApiKey) {
            apiKey = newApiKey;
            localStorage.setItem('rapidApiKey', newApiKey);
        }
        toggleSettings();
    }

    function toggleApiVisibility() {
        const apiInput = document.getElementById('api-key');
        const eyeIcon = document.querySelector('button[onclick="toggleApiVisibility()"] i');
        
        if (apiInput.type === 'password') {
            apiInput.type = 'text';
            eyeIcon.classList.remove('fa-eye');
            eyeIcon.classList.add('fa-eye-slash');
        } else {
            apiInput.type = 'password';
            eyeIcon.classList.remove('fa-eye-slash');
            eyeIcon.classList.add('fa-eye');
        }
    }
</script>

</html>